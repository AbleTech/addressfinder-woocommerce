{"version":3,"sources":["webpack:///webpack/bootstrap 37458357d782e9bb52e4","webpack:///./src/main.js","webpack:///./src/woocommerce_plugin.js"],"names":["window","AF","WooCommercePlugin","_initPlugin","safeParseJSONObject","jsonObject","undefined","JSON","parse","e","AFC","debug","alert","parsedWidgetOptions","AddressFinderConfig","widget_options","parsedNZWidgetOptions","nz_widget_options","parsedAUWidgetOptions","au_widget_options","_plugin","nzKey","key_nz","key","key_au","auKey","nzWidgetOptions","auWidgetOptions","defaultCountry","default_country","_initOnDOMLoaded","event","repetitions","document","readyState","AddressFinder","setTimeout","s","createElement","src","async","onload","body","appendChild","widgetConfig","version","$","jQuery","initialisePlugin","panelPrefix","widgets","null","enable","disable","on","nz","Widget","getElementById","prefix","selectNewZealand","bind","au","selectAustralia","countryElement","change","countryChangeHandler","setActiveWidget","preserveValues","countryField","val","_clearElementValues","countryCode","countryCodes","i","length","field","fields","checkFieldPresent","_setElementValue","_setStateValue","address","metaData","address_line_1","address_line_2","combinedAddressLine1And2","locality_name","state_territory","postcode","_dispatchEvent","fullAddress","selected","NZSelectedAddress","address_line_1_and_2","suburb","combinedAddressAndSuburb","city","_setRegionValue","region","element","eventType","Event","createEvent","initEvent","dispatchEvent","elementId","value","errorMessage","console","log","options","option","selectedOption","woocommerce_region_codes","bindToAddressPanel"],"mappings":"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","file":"addressfinder.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 37458357d782e9bb52e4","import WooCommercePlugin from './woocommerce_plugin'\n\nwindow.AF = window.AF || {}\nwindow.AF.WooCommercePlugin = WooCommercePlugin\n\nlet _initPlugin = function(){\n  var safeParseJSONObject = function(jsonObject) {\n    if(jsonObject == undefined){\n      return null;\n    }\n\n    try {\n      jsonObject = JSON.parse(jsonObject);\n    } catch (e) {\n      if (AFC.debug) {\n        alert('Invalid widget option: ' + jsonObject);\n      }\n\n      return null;\n    }\n\n    return jsonObject;\n  };\n\n  var parsedWidgetOptions = safeParseJSONObject(window.AddressFinderConfig.widget_options);\n  var parsedNZWidgetOptions = safeParseJSONObject(window.AddressFinderConfig.nz_widget_options);\n  var parsedAUWidgetOptions = safeParseJSONObject(window.AddressFinderConfig.au_widget_options);\n\n  window.AF._plugin = new AF.WooCommercePlugin({\n    nzKey: window.AddressFinderConfig.key_nz || window.AddressFinderConfig.key || window.AddressFinderConfig.key_au,\n    auKey: window.AddressFinderConfig.key_au || window.AddressFinderConfig.key || window.AddressFinderConfig.key_nz,\n    nzWidgetOptions: parsedNZWidgetOptions || parsedWidgetOptions || {},\n    auWidgetOptions: parsedAUWidgetOptions || parsedWidgetOptions || {},\n    defaultCountry: window.AddressFinderConfig.default_country || 'nz',\n    debug: window.AddressFinderConfig.debug || false\n  })\n}\n\nlet _initOnDOMLoaded = function(event, repetitions) {\n  // In WooCommerce/Wordpress a country change event is fired during the DOM loading process.\n  // If AddressFinder is added before this event it will clear the user's existing address details from the address fields.\n  // This function makes sure AddressFinder is initalised after this event.\n\n  repetitions = repetitions || 10\n\n  if (document.readyState == \"complete\" && typeof window.AddressFinder != 'undefined') {\n    setTimeout(_initPlugin, 1000)\n    return\n  }\n\n  if (repetitions == 0) {\n    // if 5 seconds have passed and the DOM still isn't ready, initalise AddressFinder\n    _initPlugin()\n    return\n  }\n\n  setTimeout(function() {\n    // if less than 5 seconds have passed and the DOM isn't ready, recall the function to check again\n    _initOnDOMLoaded('ignoredEvent', repetitions - 1)\n  }, 1000)\n}\n\nlet s = document.createElement('script')\ns.src = 'https://api.addressfinder.io/assets/v3/widget.js'\ns.async = 1\ns.onload = _initOnDOMLoaded\ndocument.body.appendChild(s)\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","// The AddressFinder plugin for WooCommerce adds an autocomplete capability to the\n// delivery and billing address fields of your online store.\n//\n// https://wordpress.org/plugins/addressfinder-woo/\n//\n// VERSION: 1.2.16\nexport default class WooCommercePlugin {\n  constructor(widgetConfig) {\n    this.version = \"1.2.16\"\n    this.widgetConfig = widgetConfig\n    $ = window.jQuery\n    this.initialisePlugin()\n  }\n\n  bindToAddressPanel(panelPrefix) {\n\n    var widgets = {}\n\n    widgets.null = {\n      enable: function () { },\n      disable: function () { },\n      on: function () { }\n    };\n\n    widgets.nz = new window.AddressFinder.Widget(document.getElementById(panelPrefix + 'address_1'), this.widgetConfig.nzKey, 'nz', this.widgetConfig.nzWidgetOptions)\n    widgets.nz.prefix = panelPrefix\n    widgets.nz.on('result:select', this.selectNewZealand.bind(this, panelPrefix));\n\n    widgets.au = new window.AddressFinder.Widget(document.getElementById(panelPrefix + 'address_1'), this.widgetConfig.auKey, 'au', this.widgetConfig.auWidgetOptions);\n    widgets.au.prefix = panelPrefix\n    widgets.au.on('result:select', this.selectAustralia.bind(this, panelPrefix));\n\n\n    var countryElement = $('#' + panelPrefix + 'country');\n    // Sometimes there is no countryElement. Not calling the changeHandler means\n    // that it can remain enabled.\n    if (countryElement[0]) {\n      countryElement.change(countryChangeHandler.bind(this));\n\n      // Run the countryChangeHandler first to enable/disable the currently selected country\n      countryChangeHandler.bind(this)(null, true);\n    } else {\n      setActiveWidget.bind(this)(this.widgetConfig.defaultCountry)\n    }\n\n    function countryChangeHandler(event, preserveValues) {\n      var countryField = $('#' + panelPrefix + 'country');\n      switch (countryField.val()) {\n        case 'NZ':\n          setActiveWidget.bind(this)('nz')\n          break;\n        case 'AU':\n          setActiveWidget.bind(this)('au')\n          break;\n        default:\n          setActiveWidget.bind(this)('')\n      }\n\n      if (!preserveValues) {\n        this._clearElementValues(panelPrefix)\n      }\n    }\n\n    function setActiveWidget(countryCode) {\n      var countryCodes = ['nz', 'au']\n      for (var i = 0; i < countryCodes.length; i++) {\n        if (countryCodes[i] == countryCode) {\n          widgets[countryCodes[i]].enable()\n        } else {\n          widgets[countryCodes[i]].disable();\n        }\n      }\n    }\n  }\n\n  checkFieldPresent(prefix, field) {\n    return !!document.getElementById(prefix + field);\n  };\n\n  _clearElementValues(prefix) {\n    var fields = [\n      'address_1',\n      'address_2',\n      'city',\n      'postcode'\n    ];\n\n    for (var i = 0; i < fields.length; i++) {\n      if (this.checkFieldPresent(prefix, fields[i])) {\n        this._setElementValue(prefix + fields[i], '')\n      }\n    }\n    this._setStateValue(prefix + 'state', '')\n  };\n\n  selectAustralia(prefix, address, metaData) {\n    if (this.checkFieldPresent(prefix, 'address_2')) {\n      this._setElementValue(prefix + 'address_1', metaData.address_line_1);\n      this._setElementValue(prefix + 'address_2', metaData.address_line_2 || '');\n    } else {\n      var combinedAddressLine1And2 = metaData.address_line_2 ?\n        metaData.address_line_1 + ', ' + metaData.address_line_2 :\n        metaData.address_line_1\n      this._setElementValue(prefix + 'address_1', combinedAddressLine1And2);\n    }\n    this._setElementValue(prefix + 'city', metaData.locality_name || '');\n    this._setStateValue(prefix + 'state', metaData.state_territory);\n    this._setElementValue(prefix + 'postcode', metaData.postcode);\n\n    this._dispatchEvent(document.body, 'update_checkout');\n  };\n\n\n  selectNewZealand(prefix, fullAddress, metaData) {\n    let selected = new AddressFinder.NZSelectedAddress(fullAddress, metaData);\n    if (this.checkFieldPresent(prefix, 'address_2')) {\n      this._setElementValue(prefix + 'address_1', selected.address_line_1_and_2());\n      this._setElementValue(prefix + 'address_2', selected.suburb());\n    } else {\n      var combinedAddressAndSuburb = selected.suburb() ?\n        selected.address_line_1_and_2() + ', ' + selected.suburb() :\n        selected.address_line_1_and_2()\n      this._setElementValue(prefix + 'address_1', combinedAddressAndSuburb);\n    }\n    this._setElementValue(prefix + 'city', selected.city());\n    this._setElementValue(prefix + 'postcode', selected.postcode());\n    this._setRegionValue(prefix + 'state', metaData.region);\n\n    this._dispatchEvent(document.body, 'update_checkout');\n  }\n\n  _dispatchEvent(element, eventType) {\n    var event;\n\n    // document.createEvent is deprecated in most modern browsers, with the exception of IE\n\n    switch (typeof (Event)) {\n      case 'function':\n        event = new Event(eventType);\n      default:\n        event = document.createEvent(\"Event\");\n        event.initEvent(eventType, false, true);\n    }\n\n    element.dispatchEvent(event)\n  }\n\n\n  _setElementValue(elementId, value) {\n\n    var element = document.getElementById(elementId)\n\n    if (element) {\n      element.value = value;\n      this._dispatchEvent(element, 'change')\n      return;\n    }\n\n    var errorMessage = 'AddressFinder Error - unable to find an element with id: ' + elementId;\n\n    if (true) {\n      alert(errorMessage);\n      return;\n    }\n\n    if (window.console) {\n      window.console.log(errorMessage);\n    }\n  }\n\n  // supports both select and input field types\n  _setStateValue(elementId, value) {\n    var element = document.getElementById(elementId)\n    if (element) {\n      // detect select field using presence of options attribute\n      if (element.options) {\n        for (var i = 0; i < element.options.length; i++) {\n          var option = element.options[i]\n          var selectedOption = option.value == value ? option.value : ''\n          if (selectedOption) break;\n        }\n\n        element.value = selectedOption\n        this._dispatchEvent(element, 'change')\n      }\n      // detect text input field using presence of value attribute\n      else if (element.value != undefined) {\n        element.value = value\n        this._dispatchEvent(element, 'change')\n      }\n    }\n  }\n\n  // supports both select and input field types\n  _setRegionValue(elementId, value) {\n    var element = document.getElementById(elementId)\n    if (element) {\n      var woocommerce_region_codes = {\n        'Auckland Region': 'AK',\n        'Bay Of Plenty Region': 'BP',\n        'Canterbury Region': 'CT',\n        'Gisborne Region': 'GI',\n        'Hawke\\'s Bay Region': 'HB',\n        'Manawatu-Wanganui Region': 'MW',\n        'Marlborough Region': 'MB',\n        'Nelson Region': 'NS',\n        'Northland Region': 'NL',\n        'Otago Region': 'OT',\n        'Southland Region': 'SL',\n        'Taranaki Region': 'TK',\n        'Tasman Region': 'TM',\n        'Waikato Region': 'WA',\n        'Wellington Region': 'WE',\n        'West Coast Region': 'WC',\n        'No Region (Chatham Islands)': null\n      }\n\n      // detect select field using presence of options attribute\n      if (element.options) {\n        var selectedOption;\n\n        for (var i = 0; i < element.options.length; i++) {\n          var option = element.options[i]\n\n          // if translate region names into woocommerce region codes\n          if (option.value == woocommerce_region_codes[value]) {\n            selectedOption = option.value\n          }\n          else {\n            selectedOption = ''\n          }\n\n          if (selectedOption) break;\n        }\n\n        element.value = selectedOption\n        this._dispatchEvent(element, 'change')\n      }\n      // detect text input field using presence of value attribute\n      else if (element.value != undefined) {\n        element.value = value\n        this._dispatchEvent(element, 'change')\n      }\n    }\n  }\n\n  initialisePlugin() {\n    if (document.getElementById('billing_address_1')) {\n      this.bindToAddressPanel('billing_');\n    }\n\n    if (document.getElementById('shipping_address_1')) {\n      this.bindToAddressPanel('shipping_');\n    }\n  };\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/woocommerce_plugin.js"],"sourceRoot":""}