(function(e,n,a){var i=function(n,i,t,s){var r=new a.Widget(document.getElementById(n+"address_1"),i,t);r.on("result:select",s);r._getPosition=function(){var n=e(this.element).offset();n.top+=e(this.element).outerHeight();return n};return r};var t=function(a){var t={enable:function(){},disable:function(){},on:function(){}};var s={};if(n["key_nz"]){s.nz=i(a,n["key_nz"],"nz",o)}else{s.nz=t}if(n["key_au"]){s.au=i(a,n["key_au"],"au",l);s.au.prefix=a}else{s.au=t}s.nz.prefix=a;s.au.prefix=a;var d=function(n){if(e(this).val()=="NZ"){s.nz.enable()}else{s.nz.disable()}if(e(this).val()=="AU"){s.au.enable()}else{s.au.disable()}n=n===undefined?true:n;if(n){r(s.au.prefix)}};var u=e("#"+a+"country");if(u[0]){u.change(d);d.bind(u)(false)}};var s=function(e,n){return!!document.getElementById(e+n)};var r=function(e){var n=["address_1","address_2","city","postcode"];for(var a=0;a<n.length;a++){if(s(e,n[a])){document.getElementById(e+n[a]).value=""}}d(e,null)};var d=function(n,a){var i=e("select#"+n+"state");if(i.length>0){e(i).select2().val(a).trigger("change")}else{u(n+"state",a)}};var o=function(e,n){var a=this.prefix;var i=n.postal||n.a;var t=i.split(",");for(var r=0;r<t.length;r++){t[r]=t[r].replace(/^\s+|\s+$/g,"")}var o=n.mailtown||n.city;if(t[t.length-1]==o+" "+n.postcode){t.pop();u(a+"city",o);u(a+"postcode",n.postcode)}if(t.length>1&&s(a,"address_2")){u(a+"address_2",t.pop())}else{u(a+"address_2","")}u(a+"address_1",t.join(", "));var l={"Auckland Region":"AK","Bay Of Plenty Region":"BP","Canterbury Region":"CT","Gisborne Region":"GI","Hawke's Bay Region":"HB","Manawatu-Wanganui Region":"MW","Marlborough Region":"MB","Nelson Region":"NS","Northland Region":"NL","Otago Region":"OT","Southland Region":"SL","Taranaki Region":"TK","Tasman Region":"TM","Waikato Region":"WA","Wellington Region":"WE","West Coast Region":"WC","No Region (Chatham Islands)":null}[n.region];d(a,l)};var l=function(e,n){var a=this.prefix;if(n.address_line_2!=null){if(s(a,"address_2")){u(a+"address_1",n.address_line_1);u(a+"address_2",n.address_line_2)}else{var i=n.address_line_1+", "+n.address_line_2;u(a+"address_1",i)}}else{u(a+"address_1",n.address_line_1);u(a+"address_2","")}u(a+"city",n.locality_name||"");d(a,n.state_territory);u(a+"postcode",n.postcode)};var u=function(e,a){var i=document.getElementById(e);if(i){i.value=a;return}var t="AddressFinder Error - unable to find an element with id: "+e;if(n.debug){alert(t);return}if(window.console){window.console.log(t)}};var c=function(){if(document.getElementById("billing_address_1")){t("billing_")}if(document.getElementById("shipping_address_1")){t("shipping_")}};e(document).ready(function(){var e=document.createElement("script");e.src="https://api.addressfinder.io/assets/v3/widget.js";e.onreadystatechange=function(){if(e.readyState==="complete"||e.readyState==="loaded"){c()}};e.onload=c;document.body.appendChild(e)})})(window.jQuery,window.AddressFinderConfig,window.AddressFinder);